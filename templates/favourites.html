{% extends "layout.html" %}

{% block content %}
<div class="favourites">
    <div class="me">
                <p class="favourites-header">What I Love About You</p>
                <div class="note-container">

                    {% for note in favourites if note['created_by'] == 'Yassin' %}
                        {% set content = note['content'] %}
                        {% set title = note['content'] | truncate(20,true) %}
                        {% set date = note['date_created'] %}
                        
                        <button class="note" onclick="showPopup('{{title}}','{{content}}','{{date}}')">{{title}}</button>
                    {% endfor %}
                    
                    
                </div>
                
               

                    
          
       
    </div>


    <img src="/static/images/heart.svg" alt="Heart" width="117px" height="107px" id="heart-seperator">

    
    <div class="her">
        <p class="favourites-header">What You Love About Me </p>
        
        <div class="note-container">

            <button class="note"></button>
          
        </div>
            
          
     
    </div>
    
</div>





<div class="note-popup">
    <div class="note-popup-container">
        <img src="/static/Close.svg" width="30px" height="30px" onclick="hidePopup()" alt="">
    </div>
</div>

<div class="full-blur"></div>


<script>
    const notePopup = document.getElementsByClassName("note-popup")[0]
    const fullBlur = document.getElementsByClassName("full-blur")[0]
    const notePopupContainer = document.getElementsByClassName('note-popup-container')[0]
    const noteContent = document.createElement('p')
    const noteDate = document.createElement('p')
    noteDate.classList.add("note-popup-date")
    noteContent.classList.add("note-popup-content")

    function showPopup(title,content,date) {
        noteContent.innerHTML = "" // Resetting the text incase this isn't the first popup to be opened.
        noteContent.innerText = content
        noteDate.innerHTML = ""
        noteDate.innerText = date
        console.log(title)
        console.log(content)
        console.log(date)
        notePopup.style.display = "block"
        fullBlur.style.display = "block"
        notePopupContainer.appendChild(noteContent)
        notePopupContainer.appendChild(noteDate)
    }

    // TODO: Modify the mongoDB database so that it stores titles
    // TODO: Create the form for her to add new entries
    


    function hidePopup() {
        console.log("closed")
        notePopup.style.display = "none"
        fullBlur.style.display = "none"
    }


</script>



{% endblock %}



